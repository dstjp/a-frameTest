<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
		<script src="https://unpkg.com/@c-frame/aframe-physics-system@4.2.2/dist/aframe-physics-system.min.js"></script>
	</head>
	<body>
		<a-scene>
			<a-entity
				id="cameraRig"
				position="0 1 0"
				camera
				look-controls
				wasd-controls
				vertical-controls
				dynamic-body
			>
			</a-entity>

			<a-box
				position="0 0.5 -3"
				rotation="0 45 0"
				color="#4CC3D9"
				dynamic-body
			></a-box>

			<a-plane
				height="50"
				width="50"
				rotation="-90 0 0"
				color="gray"
				static-body
			></a-plane>
			<a-entity id="cameraRig" position="0 1.6 0" vertical-controls> </a-entity>
		</a-scene>
		<script>
			AFRAME.registerComponent("vertical-controls", {
				schema: {
					speed: { type: "number", default: 5 },
				},
				init: function () {
					this.velocity = 0;
					this.keys = {};

					window.addEventListener("keydown", (e) => {
						this.keys[e.code] = true;
					});

					window.addEventListener("keyup", (e) => {
						this.keys[e.code] = false;
					});
				},
				tick: function (time, deltaTime) {
					const el = this.el;
					const position = el.getAttribute("position");
					const delta = deltaTime / 1000; // seconds
					const speed = this.data.speed;

					// Fly up with Space (KeyCode: Space)
					if (this.keys["Space"]) {
						position.y += speed * delta;
					}

					// Fly down with "C" key (KeyCode: KeyC)
					if (this.keys["KeyC"]) {
						position.y = Math.max(1, position.y - speed * delta);
					}

					el.setAttribute("position", position);
				},
			});
		</script>
	</body>
</html>
